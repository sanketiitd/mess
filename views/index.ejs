<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shivalik Hostel Mess</title>
    <style>
        /* Basic Styling */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #F5F5F5;
            margin: 0;
            padding: 0;
            color: #003366; /* Deep Blue */
        }

        .container {
            width: 80%;
            margin: 20px auto;
            background-color: #FFFFFF;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        h1 {
            text-align: center;
            color: #003366; /* Deep Blue */
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
            font-size: 36px;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table, th, td {
            border: 1px solid #003366; /* Deep Blue */
        }

        th, td {
            padding: 15px;
            text-align: center;
        }

        th {
            background-color: #FF6F61; /* Coral */
            color: #FFFFFF; /* White */
        }

        td {
            background-color: #FFE5B4; /* Lighter Coral */
        }

        /* Make Days column bold */
        table td:first-child {
            font-weight: bold; /* Make the first column (Day) bold */
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h2 {
            margin-bottom: 10px;
            color: #003366; /* Deep Blue */
            font-family: 'Raleway', sans-serif;
            font-weight: semi-bold;
            font-size: 20px;
        }

        .form-section input, .form-section textarea, .form-section select {
            width: 75%; /* Reduced size to 0.75 times */
            padding: 12px;
            margin: 5px 0;
            border: 1px solid #D3D3D3; /* Light Gray */
            border-radius: 6px;
            font-size: 1rem;
        }

        .form-section button {
            width: 75%; /* Reduced size to 0.75 times */
            padding: 12px 18px;
            background-color: #FF6F61; /* Coral */
            color: #FFFFFF; /* White */
            border: none;
            border-radius: 6px;
            font-family: 'Poppins', sans-serif;
            font-weight: medium;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .form-section button:hover {
            background-color: #FF4C4C; /* Darker Coral */
        }

        .announcement {
            background-color: #F5F9FC; /* Very Light Blue */
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .small-font {
            font-size: 0.85rem;
            color: #777;
        }

        .footer {
            text-align: center;
            font-size: 0.9rem;
            color: #003366; /* Deep Blue */
            margin-top: 40px;
            border-top: 2px solid #003366;
            padding-top: 15px;
        }

        hr {
            margin: 30px 0;
            border: 1px solid #003366; /* Deep Blue */
        }

        /* Media query for mobile responsiveness */
        @media screen and (max-width: 768px) {
            .container {
                width: 95%;
            }

            h1 {
                font-size: 2rem;
            }
            .form-section h2 {
                font-size: 1.6rem;
            }

            .form-section button {
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            table th, table td {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Shivalik Hostel Mess</h1>
        
        <!-- Meal Plan Table -->
        <h2>Weekly Meal Plan</h2>
        <% if (lastUpdated) { %>
            <p style="color: #003366; font-size: 1rem;">[Menu Last changed: <%= lastUpdated %>]</p>
        <% } %>
        <table>
            <tr>
                <th>Day</th>
                <th>Breakfast</th>
                <th>Lunch</th>
                <th>Evening Snacks</th>
                <th>Dinner</th>
            </tr>
            <% ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'].forEach(function(day) { %>
            <tr>
                <td><%= day.charAt(0).toUpperCase() + day.slice(1) %></td>
                <td><%= mealPlan[day] && mealPlan[day].breakfast ? mealPlan[day].breakfast : '' %></td>
                <td><%= mealPlan[day] && mealPlan[day].lunch ? mealPlan[day].lunch : '' %></td>
                <td><%= mealPlan[day] && mealPlan[day].snacks ? mealPlan[day].snacks : '' %></td>
                <td><%= mealPlan[day] && mealPlan[day].dinner ? mealPlan[day].dinner : '' %></td>
            </tr>
            <% }); %>
        </table>

        <!-- Announcements -->
        <div class="announcement-section">
            <h2>Announcements</h2>
            <% if (announcements.length > 0) { %>
                <% announcements.forEach(function(announcement) { 
                    let announcementDate = new Date(announcement.created_at);
                    announcementDate.setHours(announcementDate.getHours() + 5);
                    announcementDate.setMinutes(announcementDate.getMinutes() + 30);
                    let formattedDate = announcementDate.toLocaleDateString('en-IN', {
                        weekday: 'short',
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                    });
                %>
                <div class="announcement">
                    <p><%= announcement.announcement %></p>
                    <small class="small-font">[<%= formattedDate %>]</small>
                </div>
                <% }); %>
            <% } else { %>
                <div class="announcement">No announcements yet.</div>
            <% } %>
        </div>

        <!-- Suggestion Box -->
        <div class="form-section">
            <h2>Suggestion Box</h2>
            <form action="/submit-suggestion" method="POST" onsubmit="return validateSuggestion()">
                <textarea id="suggestion" name="suggestion" rows="4" placeholder="Your suggestion..." required></textarea>
                <button type="submit">Submit Suggestion</button>
            </form>
        </div>

        <!-- Complaint Box with Collapse/Expand Feature -->
        <div class="form-section">
            <h2>Complaint Box</h2>
            <button id="toggle-complaint" onclick="toggleComplaintForm()">Expand Complaint Box</button>
            <div id="complaint-form" style="display: none;">
                <form action="/submit-complaint" method="POST">
                    <label for="complaint-date">Select Date:</label>
                    <input type="date" id="complaint-date" name="date" required>
                    <label for="meal-type">Select Meal:</label>
                    <select id="meal-type" name="meal" required>
                        <option value="breakfast">Breakfast</option>
                        <option value="lunch">Lunch</option>
                        <option value="snacks">Evening Snacks</option>
                        <option value="dinner">Dinner</option>
                    </select>
                    <label for="complaint-name">Your Name:</label>
                    <input type="text" id="complaint-name" name="name" placeholder="Your name..." required>
                    <label for="complaint-mobile">Your Mobile Number:</label>
                    <input type="tel" id="complaint-mobile" name="mobile" placeholder="Your mobile number..." required>
                    <textarea id="complaint" name="complaint" rows="4" placeholder="Your complaint..." required></textarea>
                    <button type="submit">Submit Complaint</button>
                </form>
            </div>
        </div>

        <!-- Copyright Section -->
        <div class="footer">
            <p>&copy; 2024 Sanket Patil - Mess Secretary, Shivalik Hostel, IIT Delhi</p>
            <p>&copy; 2024 <a href="https://github.com/deadsmash07" target="_blank">Arnav Raj</a> - Mess Secretary, Zanskar Hostel, IIT Delhi</p>
        </div>
        
        <hr>    

        <!-- Disclaimer section -->
        <div class="form-section">
            <p class="small-font">
                This website is intended for informational purposes only, and the content provided here may be updated periodically. The Mess reserves the right to modify the menu, announcements, and other details as necessary.
                *Please note that the availability of extra messing is subject to change based on the Mess workload and item availability.
            </p>
        </div>
    </div>

    <script>
        function validateSuggestion() {
            const suggestion = document.getElementById('suggestion').value.trim();
            if (suggestion === '') {
                alert('Suggestion cannot be empty');
                return false;
            }
            return true;
        }

        function toggleComplaintForm() {
            const form = document.getElementById('complaint-form');
            const button = document.getElementById('toggle-complaint');
            
            // Toggle the display property
            if (form.style.display === 'none') {
                form.style.display = 'block';
                button.textContent = 'Collapse Complaint Box';
            } else {
                form.style.display = 'none';
                button.textContent = 'Expand Complaint Box';
            }
        }
    </script>
</body>
</html>
